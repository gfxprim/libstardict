.\" Generated by scdoc 1.11.2
.\" Complete documentation for this program is not available as a GNU info page
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.nh
.ad l
.\" Begin generated content:
.TH "sd_open_dict" "3" "2023-02-26"
.P
.SH NAME
sd_open_dict, sd_close_dict - Opens a stardict dictionary
.P
.SH LIBRARY
Libstardict (\fI-lstardict\fR)
.P
.SH SYNOPSIS
\fB#include <libstardict.\&h>\fR
.P
\fBstruct sd_dict *sd_open_dict(const char \fR\fI*path\fR\fB, const char \fR\fI*name\fR\fB);\fR
.P
\fBvoid sd_close_dict(struct sd_dict \fR\fI*self\fR\fB);\fR
.SH DESCRIPTION
.P
\fBsd_open_dict()\fR
.P
.RS 4
The \fBsd_open_dict\fR() opens a stadict dictionary and returns a handle
for word lookups.\&
.P
The \fIpath\fR is a path to a directory with the dictionary files and
\fIname\fR is the dictionary filename without a suffix.\& The actual
dictionary consists of several files with the same name and different
suffixes.\& The list of the dictionaries installed on the system can be
looked up by \fBsd_lookup_dict_paths\fR(3).\&
.P
.RE
.nf
.RS 4
struct sd_dict {
	char entry_fmt;
	unsigned int word_count;
	char book_name[SD_DICT_BOOKNAME_MAX];
	\&.\&.\&.
}
.fi
.RE
.P
.RS 4
The \fIentry_fmt\fR if set describes the format of the data returned by a
word lookup.\& Stardict format supports dictionaries with mixed format
entries, but these seems to be really rare, so you can expect the
entry_fmt to be set most of the time.\&
.P
The formats are:
.P
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.IP \(bu 4
.\}
\fBSD_ENTRY_UTF8_TEXT\fR UTF8 plaintext

.RE
.P
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.IP \(bu 4
.\}
\fBSD_ENTRY_PANGO_MARKUP\fR Pango markup, UTF8 HTML-like markup however whitespaces are interpreted literaly

.RE
.P
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.IP \(bu 4
.\}
\fBSD_ENTRY_HTML\fR UTF8 HTML

.RE
.P
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.IP \(bu 4
.\}
\fBSD_ENTRY_XDXF\fR HTML-like dictionary markup see http://xdxf.\&sourceforge.\&net

.RE
.P
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.IP \(bu 4
.\}
\fBSD_ENTRY_CHINESE_JAPANESE\fR Chinese or Japanse UTF8 text

.RE
.P
The \fIword_count\fR is a number of words in the dictionary.\&
.P
The \fIbook_name\fR is an UTF8 string with the dictionary name.\&
.P
.RE
\fBsd_close_dict()\fR
.RS 4
Closes a dictionary and frees the memory.\& Passing \fINULL\fR to the call is a no-op.\&
.P
.RE
.SH RETURN VALUE
.P
The \fBsd_open_dict\fR() returns a handle to a dictionary or NULL in a case of a failure.\&
.P
.SH EXAMPLES
.P
.nf
.RS 4
#include <stdio\&.h>
#include <libstardict\&.h>

int main(int argc, const char *argv[])
{
	struct sd_dict *dict;

	if (argc != 3) {
		printf("Usage: %s dict_path dict_filename\\n", argv[0]);
		return 1;
	}

	dict = sd_open_dict(argv[1], argv[2]);

	if (!dict) {
		printf("Failed to open dictionary\\n");
		return 1;
	}

	printf("Loaded dictionary \&'%s\&' with %u words in index\\n",
	       dict->book_name, dict->word_count);

	sd_close_dict(dict);

	return 0;
}
.fi
.RE
.P
.SH SEE ALSO
.RS 4
\fBsd_lookup_dict_paths\fR(3), \fBsd_lookup\fR(3), \fBsd_get_entry\fR(3)
