.\" Generated by scdoc 1.11.2
.\" Complete documentation for this program is not available as a GNU info page
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.nh
.ad l
.\" Begin generated content:
.TH "sd_lookup_dict_paths" "3" "2023-02-26"
.P
.SH NAME
sd_lookup_dict_paths, sd_free_dict_paths - Looks up for stardict dictionaries in standard paths
.P
.SH LIBRARY
Libstardict (\fI-lstardict\fR)
.P
.SH SYNOPSIS
\fB#include <libstardict.\&h>\fR
.P
\fBvoid sd_lookup_dict_paths(struct sd_dict_paths\fR \fI*paths\fR\fB);\fR
.P
\fBvoid sd_free_dict_paths(struct sd_dict_paths\fR \fI*paths\fR\fB);\fR
.P
.SH DESCRIPTION
.P
\fBsd_lookup_dict_paths\fR()
.RS 4
The \fBsd_lookup_dict_paths\fR() looks for stardict dictionaries in
stardict system path e.\&g.\& \fI/usr/share/stardict/dic/\fR and in the
user home in \fI.\&stardict/dic/\fR directory.\&
.P
A staridct dictionary consists of a few files with the same name and
different suffixes, from these the .\&ifo file is parsed during the
lookup and if this operation succeeds the dictionary is added to the
\fIpaths\fR array of dictionaries.\&
.P
.RE
.nf
.RS 4
struct sd_dict_paths {
	unsigned int dict_cnt;
	struct sd_dict_path **paths;
};
.fi
.RE
.P
.RS 4
The \fIpaths\fR pointer passed to the function is used to store the
\fIdict_cnt\fR a number of discovered dictionaries and the \fIpaths\fR pointer
is use to store an array of \fIstruct sd_dict_path\fR dictionaries.\&
.P
.RE
.nf
.RS 4
struct sd_dict_path {
	const char *dir;
	char book_name[SD_DICT_BOOKNAME_MAX];
	char fname[];
};
.fi
.RE
.P
.RS 4
The \fIstruct sd_dict_path\fR describes a single dictionary.\&
.P
The \fIdir\fR is a directory the dictionary files are stored in and the
\fIfname\fR is a file name, without a suffix, for the dictionary files.\&
.P
The \fIbook_name\fR is a name parsed from the .\&ifo description and should
be displayed in the user inteface to describe the dictionary.\&
.P
.RE
\fBsd_free_dict_paths()\fR
.RS 4
The \fBsd_free_dict_paths\fR() frees memory allocated by the \fBsd_lookup_dict_paths\fR().\&
.P
.RE
.SH EXAMPLES
.P
.nf
.RS 4
#include <stdio\&.h>
#include <libstardict\&.h>

int main(void)
{
	struct sd_dict_paths paths;

	sd_lookup_dict_paths(&paths);

	if (!paths\&.paths) {
		printf("No dictionaries found!\\n");
		return 1;
	}

	printf("Found %u dictionaries:\\n", paths\&.dict_cnt);

	for (i = 0; i < paths\&.dict_cnt; i++)
		printf(" %2i \&'%s\&' - %s\&.ifo\\n", i, paths\&.paths[i]->book_name, paths\&.paths[i]->fname);
	printf("n");

	sd_free_dict_paths(&paths);

	return 0;
}
.fi
.RE
.P
.SH SEE ALSO
\fBsd_open_dict\fR(3)
